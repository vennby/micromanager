{% extends 'layout.html' %} {% block content %}
<div class="card shadow-sm mx-auto" style="max-width: 500px">
  <div class="card-body">
    <h3 class="card-title mb-3">Select Events to Combine into PDF</h3>
    <form method="post">
      <div class="mb-3">
        <label for="filename" class="form-label">Enter PDF filename</label>
        <input
          type="text"
          class="form-control"
          id="filename"
          name="filename"
          placeholder="e.g. my_events.pdf"
          required
        />
      </div>
      <div class="form-check mb-2">
        <input
          class="form-check-input"
          type="checkbox"
          id="selectAll"
          onclick="toggleAll(this)"
        />
        <label class="form-check-label fw-bold" for="selectAll"
          >Select All</label
        >
      </div>
      {% for event in events %}
      <div class="form-check mb-2">
        <input
          class="form-check-input event-checkbox"
          type="checkbox"
          name="event_ids"
          value="{{ event.id }}"
          id="event{{ event.id }}"
        />
        <label class="form-check-label" for="event{{ event.id }}">
          {{ event.title }}
        </label>
      </div>
      {% endfor %}
      <div class="d-grid mt-3">
        <input type="submit" value="Download PDF" class="btn btn-success" />
      </div>
    </form>
  </div>
</div>
<script>
  function toggleAll(source) {
    const checkboxes = document.querySelectorAll(".event-checkbox");
    for (const cb of checkboxes) {
      cb.checked = source.checked;
    }
  }
</script>
{% endblock %}
